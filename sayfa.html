<!DOCTYPE HTML>

<html>
	<head>
		<title>DENEME</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a href="index.html" class="title">ITU UltiMate</a>
				<nav>
					<ul>
						<li><a href="index.html">ANASAYFA</a></li>
						<li><a href="generic.html">PROGRAMLAYICI</a></li>
						<li><a href="elements.html"  class="active">DERS IMDB</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main" class="wrapper">
						<div class="inner">
							<h1 class="major">DERS IMDB</h1>

							<div class="container">
                                <h2>Weekly Course Program</h2>
                                <div class="course-list" id="courseList"></div>
                                
                                <select id="departmentSelect" onchange="updateCourseOptions()">
                                    <option value="">Bölüm Seçin</option>
                                    <option value="KMM">KMM</option>
                                    <option value="MAT">MAT</option>
                                    <option value="AKM">AKM</option>
                                </select>
                        
                                
                                <select id="courseSelect" disabled onchange="updateCRNOptions()">
                                    <option value="">Ders Seçin</option>
                                </select>
                        
                                
                                <select id="crnSelect" disabled>
                                    <option value="">CRN Seçin</option>
                                </select>
                        
                                <button onclick="addCourse()">Ders Ekle</button>
                        
                                <table>
                                    <tr>
                                        <th>Time</th>
                                        <th>Pazartesi</th>
                                        <th>Salı</th>
                                        <th>Çarşamba</th>
                                        <th>Perşembe</th>
                                        <th>Cuma</th>
                                    </tr>
                                    <tbody id="schedule">
                                        <script>
                                            for (let hour = 8; hour < 19; hour++) {
                                                document.write(`<tr><td>${hour}:00</td>`);
                                                for (let i = 0; i < 5; i++) {
                                                    document.write(`<td style='position:relative' id="${hour}_${i}"></td>`);
                                                }
                                                document.write(`</tr>`);
                                            }
                                        </script>
                                    </tbody>
                                </table>
                            </div>
                        
                            <script>
                                const courses = {
                                    "KMM": { "KMM210E": ["35315", "35316"], "KMM315": ["35111"] },
                                    "MAT": { "MAT101": ["36200", "36201"], "MAT304": ["36450"] },
                                    "AKM": { "AKM120": ["37400"], "AKM220": ["37410"] }
                                };
                                
                                const usedColors = new Set();
                                const fixedSchedule = {};
                                let availableColors = ["#8B0000", "#006400", "#00008B", "#8B008B", "#FF4500", "#2F4F4F", "#4B0082", "#800000", "#4682B4", "#708090"];
                                
                                function updateCourseOptions() {
                                    let department = document.getElementById("departmentSelect").value;
                                    let courseSelect = document.getElementById("courseSelect");
                                    courseSelect.innerHTML = '<option value="">Bölüm Seçin</option>';
                                    courseSelect.disabled = !department;
                                    if (department) {
                                        for (let course in courses[department]) {
                                            courseSelect.innerHTML += `<option value="${course}">${course}</option>`;
                                        }
                                    }
                                    updateCRNOptions();
                                }
                        
                                function updateCRNOptions() {
                                    let department = document.getElementById("departmentSelect").value;
                                    let course = document.getElementById("courseSelect").value;
                                    let crnSelect = document.getElementById("crnSelect");
                                    crnSelect.innerHTML = '<option value="">CRN Seçin</option>';
                                    crnSelect.disabled = !course;
                                    if (course) {
                                        courses[department][course].forEach(crn => {
                                            crnSelect.innerHTML += `<option value="${crn}">${crn}</option>`;
                                        });
                                    }
                                }
                        
                                function addCourse() {
                                    let department = document.getElementById("departmentSelect").value;
                                    let course = document.getElementById("courseSelect").value;
                                    let crn = document.getElementById("crnSelect").value;
                                    if (!department || !course || !crn) return;
                                    
                                    if (!fixedSchedule[course]) {
                                        let hour = Math.floor(Math.random() * 11) + 8;
                                        let day = Math.floor(Math.random() * 5);
                                        fixedSchedule[course] = `${hour}_${day}`;
                                    }
                        
                                    let cellId = fixedSchedule[course];
                                    let targetCell = document.getElementById(cellId);
                                    if (!availableColors.length) return;
                                    let color = availableColors.pop();
                                    usedColors.add(color);
                                    
                                    let courseDiv = document.createElement("div");
                                    courseDiv.classList.add("course");
                                    courseDiv.style.backgroundColor = color;
                                    courseDiv.innerText = `${course} - CRN: ${crn}`;
                                    courseDiv.setAttribute("data-course", course);
                                    targetCell.appendChild(courseDiv);
                                    
                                    let courseList = document.getElementById("courseList");
                                    let courseItem = document.createElement("div");
                                    courseItem.classList.add("course-item");
                                    courseItem.innerHTML = `${course} - CRN: ${crn} <button class='remove-btn' onclick='removeCourse("${course}", this)'>Remove</button>`;
                                    courseList.appendChild(courseItem);
                                }
                        
                                function removeCourse(course, btn) {
                                    document.querySelectorAll(`.course[data-course='${course}']`).forEach(el => el.remove());
                                    btn.parentElement.remove();
                                }
                            </script>
	</body>
</html>